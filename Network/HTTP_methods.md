> 이 글에서는 HTTP 통신의 대표적인 METHOD 들에 대해 간략하게 정리합니다.

## HTTP MEHOTD(HTTP REQUEST METHOD)

>[!NOTE]
HTTP는 요청 메소드를 정의하여, 주어진 리소스에 수행하길 원하는 행동을 나타냅니다. 간혹 요청 메서드를 HTTP 동사 로도불리며, 각각의 메서드는 서로 다른의미를 구현하지만, 일부 기능은 메서드 집합간에 서로 공유하기도 합니다. 이를테면 응답 메서드는 **안전**하거나,**캐시** 가능하거나, **멱등성**을 가질 수 있습니다.

### 안전

HTTP METHOD 요청에 따라 (서버의) 자원을 생성하거나 삭제하는 자원의 생성,갱신,삭제,조회 를 할 수 있습니다. 사용자의 요청에따라 서버 자원상태를 바꾸지 않다면 그 메서드는 안전하다고 표현합니다. 대표적으로 자원의 조회를 요청하는 `GET` 메서드는 안전하다고 표현 할 수 있습니다. 추가적으로 모든 안전한 메서드는 `멱등성`을 가질 수 있지만 모든 `멱등성`을가진 메서드가 안전하지는 않습니다.

### 캐시 가능

캐시 가능(cacheable) 한 응답은 캐시할 수 있는 HTTP 응답으로, 나중에 검색하고 사용하기 위해 저장하여 새 요청을 서버에 저장합니다. 모든 HTTP 응답을 캐시할 수 있는 것은 아니며, 캐시할 HTTP 응답에 대한 제약 조건은 다음과 같습니다.

### 멱등성

> 동일한 요청을 한 번 보내는 것과 여러 번 연속으로 보내는 것이 같은 효과를 지니고, 서버의 상태도 동일하게 남을 때, 해당 HTTP 메서드가 멱등성을 가졌다고 말합니다. -MDN

같은 요청에 대해서 항상 같은 결과를 응답한다면 그건 `멱등` 하다고 표현 합니다.

대표적으로 **안전**한 메소드와, DELETE, PUT 등이 대표적으로 멱등성을 가집니다.


### PUT vs PATCH

자원을 수정하는 HTTP METHOD 에는 PUT 과 PATCH 두가지가 있습니다. 
어떤 차이가 있을까요 ?

표로 정리한다면 다음과 같이 표현 할 수 있습니다.

|비교 |PUT|PATCH|
|---|---|---|
|멱등성|보장|보장하지 않음 
|자원 교체|전체 자원의 교체|자원의 부분교체 

조금더 구체적으로 예시를 들어볼게요. 🤔   
우선 다음과같은 자원이 있다고 가정해봅시다.

```json
{
    "id" : int
    "name": String
    "age": int
}
```
```json
{
    "id" : 1
    "name": "지민"
    "age": 20
}
```
위의 자원에 대해 변경한다면 다음과 같은 일들이 일어날 겁니다.(Rest API라면)
#### PUT 의 경우

>[!TIP]
`PUT` METHOD 는 자원의 전체 교체하기를 예상합니다. 

`PUT` METHOD를 통해 예시로 들었던 자원을 변경한다고 생각해볼게요 아마 요청주소는 다음과 같을겁니다. 

`PUT http://~~domain/person/1`
```json
// body
{
    "id" : 1
    "name" : "철수"
    "age" : 21
}

```
이 경우에 PUT METHOD 가 실행되고 id 1에대한 내용이 전체 변경이되는 걸 확인 할 수 있습니다.

만약 요청 body 에 자원이 누락되어 있다면 어떻게 변경되길 기대할까요 ?

`PUT http://~~domain/person/1`
```json
// body
{
    "id" : 1
    "age" : 21
}

```

만약 위와 같이 요청하게 된다면 자료의 name 값이 없기에 빈값에 대해서는 `null` `None` 등의 값이 없음을 명시하게 됩니다. 위와 같이 요청한경우 사용자는 ID 1에대해 다음과 같은값을 기대합니다.

```json
// GET http://~~domain/person/1x
{
    "id" : 1
    "name" : NULL
    "age" : 21
}
```

#### PATCH 의 경우


## 참조 
- [MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)

